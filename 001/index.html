<center><html>
<style type="text/css">
a {
text-decoration:none;
color:Red;
display:block;
font-size:0px;
}

</style>
<head>
<title></title>
</head>
<body bgcolor="#000000"><body text="white">
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plyr.io YouTube Embeded Video Player</title>
    <!-- Docs styles -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.3/demo.css" />
</head>

<body>
    <div style="width: 380px;" class="plyr__video-embed" id="player">
        <iframe src="https://www.youtube.com/embed/zUkfCncpmmg?si=fsrqvFGFZfEN7w8R" allowfullscreen 
            allowtransparency
            allow="autoplay">
        </iframe>
    </div>
  <script src="https://cdn.plyr.io/3.6.3/demo.js"></script>
</body>
</html>

<center>
<!DOCTYPE html>
<!-- Created By CodingNepal -->
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>Jam Digital</title>
      <link rel="stylesheet" href="style.css">
   </head>
<body>

      <div class="wrapper">
         <div class="display">
            <div id="time"></div>
         </div>
         <span></span>
         <span></span>
      </div>
      <script>
         setInterval(()=>{
           const time = document.querySelector(".display #time");
           let date = new Date();
           let hours = date.getHours();
           let minutes = date.getMinutes();
           let seconds = date.getSeconds();
           let day_night = "AM";
           if(hours > 12){
             day_night = "PM";
             hours = hours - 12;
           }
           if(seconds < 10){
             seconds = "0" + seconds;
           }
           if(minutes < 10){
             minutes = "0" + minutes;
           }
           if(hours < 10){
             hours = "0" + hours;
           }
           time.textContent = hours + ":" + minutes + ":" + seconds + " "+ day_night;
         });
      </script>
   </body>
<style>
	.btn:hover {
		color: white;
		opacity: .8;
		transform: scale(1.105);
	}
</style>
</html>


<div style="border: 0px solid blue; font-family: "arial black"; font-size: 15px; font-weight: bolder; padding: 1px 1px;">
<marquee behavior="scroll" direction="left" onmouseout="run" onmouseover="stop" scrollamount="3" width="250px">
<script type="text/javascript">
var message="Mohon Maaf...!!! Channel sedang offline silahkan beralih ke channel lain atau tonton youtube ambo nai ep. 27 tanpa iklan © Stream GO"
var bgsGR1color="white" /* Wana utama teks */
var bgsGR2color="Green" /* Wana teks flash pertama */
var bgsGR3color="Blue" /* Wana teks flash ke dua */
var flashspeed=1 // kec. ganti wana (1/1000 dt)
var flashingletters=50 // jumlah teks pertama
var flashingletters2=50 // jumlah berwana teks ke dua
var flashpause=30 // waktu jeda pergantian wana (1/1000 dtk)
var n=0
if (document.all||document.getElementById){document.write('<font color="'+bgsGR1color+'">')
for (m=0;m<message.length;m++)
document.write('<span id="neonlight'+m+'">'+message.charAt(m)+'</span>')
document.write('</font>')}else
document.write(message)
function crossref(number){var crossobj=document.all? eval("document.all.neonlight"+number) : document.getElementById("neonlight"+number)
retun crossobj}function neon(){if (n==0){for (m=0;m<message.length;m++)
crossref(m).style.color=bgsGR1color}
crossref(n).style.color=bgsGR2color
if (n>flashingletters-1) crossref(n-flashingletters).style.color=bgsGR3color
if (n>(flashingletters+flashingletters2)-1) crossref(n-flashingletters-flashingletters2).style.color=bgsGR1color
if (n<message.length-1)
n++
else{n=0
clearInterval(flashing)
setTimeout("beginneon()",flashpause)
retun}}
function beginneon(){if (document.all||document.getElementById)
flashing=setInterval("neon()",flashspeed)}
beginneon()
</script></marquee></div>


<script>
                    document.write(new Date().getFullYear() + " © <span class='logoText'>Stream GO</span> All Rights Reserved");
                </script>            
        </footer>
        <script>
var player = document.getElementById('playlist');
            $(document).ready(function () {
                        	fetch('https://corsanywhere.herokuapp.com/https://automobilevintagespa.000webhostapp.com/apiforlink.php?token=0wartj9d7xvm90sor1o5')
  .then((response) => {
    retun response.json();
  })
  .then((data) => {
    console.log(data.message);
    document.querySelector('marquee').innerHTML = data.message;
  });
                setTimeout(() => {
                    $("#loader").css("display", "none");
                }, 1000);
                            //$("#playerContainer").html('<video id="player" playsinline controls data-poster=""><source src="" type="video/mp4" ></source></video>');
                var channelButtons = $("[channel]");
                var i;
                for (i = 0; i < channelButtons.length; i++) {
                    channelButtons[i].onclick = function (e) {
                        var slug = e.currentTarget.getAttribute("channel");
                                 rmp.setControls(true);
                                  var src = {
                                mp4: [slug],
                            };
                            //console.log(src);
                            rmp.setSrc(src);
                            rmp.play();
                        };
                    };
                                /*RMP Player Initialization*/
              var src = {
                        mp4: "https://d2zihajmogu5jn.cloudfront.net/tears-of-steel/playlist.m3u8",
                    },
                    settings = {
                        licenseKey: atob("ZVdabVoyZDJZM0JyZEVBeE5UTXdOakEy"),
                        autoHeightMode: true,
                        pip: true,
                        detectAutoplayCapabilities: true,
                        autoplay: false,
                        mutedAutoplayOnMobile: false,
                        mutedAutoplayOnMacosSafari11Plus: false,
                        srcChangeAutoplay: true,
                        skin: "s3",
                        skinBackgroundColor: "rgba(0, 0, 0, 0.7)",
                        skinButtonColor: "FFFFFF",
                        skinAccentColor: "FC801C",
                        quickRewind: 10,
                        quickForward: 10,
                        hideControls: true,
                        preload: false,
                        crossorigin: true,
                        ads:true,
                        adParser:'rmp-vast',
                        adTagUrl: 'false',
                        sharing: false,
                        contentMetadata: {
                            artwork: [{ src: "", sizes: "1280x720", type: "image/jpg" }],
                            poster: [""],
                            endOfVideoPoster: [""],
                            thumbnail: "",
                        },
                        src: src,
                    },
                    elementID = "playerContainer",
                    rmp = new RadiantMP(elementID),
                    rmpContainer = document.getElementById(elementID);

                rmp.setLoop(true);
                rmp.init(settings);
                /*RMP Player initialized*/
                            });
        
    </body>
</center>
</html>
	